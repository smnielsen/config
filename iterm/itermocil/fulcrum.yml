windows:
  - name: Base
    layout: main-vertical
    root: ~/dev/
    panes:

      - name: leo-sports-client
        commands:
          - export REPO=leo-sports-client
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd $REPO
          - git stash; git pull --rebase
          - nvm install && npm install --no-package-lock
          - npm run update-schema
          - npm run relay
          - npm run relay-watch & npm run dev

      - name: leo-sports-event-service
        commands:
          - export REPO=leo-sports-event-service
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd $REPO
          - git stash; git pull --rebase
          - nvm install && npm install --no-package-lock
          - export COUCHBASE=couchbase01.stage01.portal.rslon.int.leovegas.net
          - export LSS_URL=http://portal-lss.lb.stage01.portal.rslon.int.leovegas.net
          - export PORT=5002
          - npm run dev

      - name: leo-graphql
        commands:
          - export REPO=leo-graphql
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd $REPO
          - git stash; git pull --rebase
          - nvm install && npm install --no-package-lock
          - export LSES_URL=http://127.0.0.1:5002
          - export COUCHBASE=couchbase01.stage01.portal.rslon.int.leovegas.net
          - export LSS_URL=http://portal-lss.lb.stage01.portal.rslon.int.leovegas.net
          - export LSPRS_URL=http://portal-lsprs.lb.stage01.portal.rslon.int.leovegas.net
          - export LSDS_URL=http://portal-lsds.lb.stage01.portal.rslon.int.leovegas.net
          - npm run dev

      - name: fulcrum-frontend
        commands:
          - export REPO=fulcrum-frontend
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd fulcrum-frontend/src/web
          - git stash; git pull --rebase
          - nvm install && npm install --no-package-lock && npm install -g concurrently && npm install -g relay-compiler
          - export FORCE_LOCALE=true
          - export LSC_URL=http://127.0.0.1:3030/static/sports-client
          - export GQL_URL=http://localhost:8000
          - export LAGS_URL=http://portal-lags.lb.stage01.portal.rslon.int.leovegas.net
          - export LI18NS_URL=http://portal-li18ns.lb.stage01.portal.rslon.int.leovegas.net
          - npm run compile-gql-documents
          - npm run dev-build & npm run dev-ssr
