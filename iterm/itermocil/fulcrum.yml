windows:
  - name: Base
    layout: tiled
    root: ~/dev/
    panes:

      - name: leo-sports-client
        commands:
          - export DEV_ENV=dev94
          - export REPO=leo-sports-client
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd $REPO
          - nvm i; npm i
          - leo-gcp-start -e $DEV_ENV

      - name: leo-sports-event-service
        commands:
          - export DEV_ENV=dev94
          - export REPO=leo-sports-event-service
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd $REPO
          - npm install -g nodemon
          - nvm i; npm i
          - export PORT=5002
          - leo-gcp-start -e $DEV_ENV

      - name: leo-graphql
        commands:
          - export DEV_ENV=dev94
          - export REPO=leo-graphql
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd $REPO
          - npm install -g nodemon
          - nvm i; npm i
          - export LSES_URL=http://127.0.0.1:5002
          - leo-gcp-start -e $DEV_ENV -i lses

      - name: fulcrum-frontend
        commands:
          - export DEV_ENV=dev94
          - export REPO=fulcrum-frontend
          - if [ ! -d "$REPO" ]; then echo "Missing $REPO. Cloning..."; git clone git@github.com:gutro/$REPO.git; fi
          - cd $REPO/src/web
          - npm install -g concurrently && npm install -g relay-compiler
          - nvm i; npm i
          - export FORCE_LOCALE=true
          - export LSC_URL=http://127.0.0.1:3030/static/sports-client
          - export GQL_URL=http://localhost:8000
          - leo-gcp-start -e $DEV_ENV -i lsc -i gql -i lffs
